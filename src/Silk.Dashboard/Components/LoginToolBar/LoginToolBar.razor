@namespace Silk.Dashboard.Components

@using Silk.Dashboard.Extensions

@if (_authState.User.IsAuthenticated())
{
    @* Todo: Check this doesn't look weird if other elements are added *@
    <MudButtonGroup OverrideStyles="false">
        <MudButton Variant="Variant.Text" Link="dashboard/profile">
            @_authState.User.Identity?.Name
        </MudButton>
        
        <MudButton Variant="Variant.Text" Link="api/account/logout">
            Logout
        </MudButton>
    </MudButtonGroup>
}
else
{
    <MudButton Variant="Variant.Text" Link="api/account/login">
        Login
    </MudButton>
}

@code
{
    [CascadingParameter]
    private Task<AuthenticationState> AuthTask { get; set; }

    private AuthenticationState _authState;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        _authState = await AuthTask;
    }
}