@namespace Silk.Dashboard.Components

@using DSharpPlus.Entities

<MudGrid>
    <MudItem xs="12">
        <MudGrid Spacing="4" Justify="Justify.Center">
            @foreach (var guild in Guilds)
            {
                <MudItem @key="@guild.Id">
                    @if (GuildTemplate is not null)
                    {
                        @* Todo: Change spacing on items (if surrounding `div` is removed, items have no spacing) *@
                        @GuildTemplate(guild)
                    }
                    else
                    {
                        <GuildView Guild="@guild" OnClick="NavigateToManageGuild" />
                    }
                </MudItem>
            }
        </MudGrid>
    </MudItem>
</MudGrid>

@code {

    [Inject]
    public NavigationManager NavigationManager { get; set; }

    [Parameter]
    public IEnumerable<DiscordGuild> Guilds { get; set; }

    [Parameter]
    public RenderFragment<DiscordGuild> GuildTemplate { get; set; }

    private void NavigateToManageGuild(DiscordGuild guild) 
        => NavigationManager.NavigateTo($"/Dashboard/ManageGuild/{guild.Id}");
}